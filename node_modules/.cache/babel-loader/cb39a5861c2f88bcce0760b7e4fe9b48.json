{"ast":null,"code":"import firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth'; //v9\n\nimport 'firebase/compat/firestore';\nimport 'firebase/compat/storage';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA5W4p6CXsiXz_B-MTOm648XlbcHanBdKw\",\n  authDomain: \"thienitss.firebaseapp.com\",\n  projectId: \"thienitss\",\n  storageBucket: \"thienitss.appspot.com\",\n  messagingSenderId: \"393590550782\",\n  appId: \"1:393590550782:web:41105fb580453effa735af\",\n  measurementId: \"G-F6TQFX0GHF\"\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig); // Export\n// export const googleAuthProvider = new GoogleAuthProvider();\n// export const facebookAuthProvider = new FacebookAuthProvider();\n\nconst db = firebase.firestore();\nexport const auth = firebase.auth();\nexport default firebase;\nexport const getFirebaseItems = async () => {\n  try {\n    const snapshot = await db.collection('todos').get();\n    const items = snapshot.docs.map(doc => ({ ...doc.data(),\n      id: doc.id\n    }));\n    return items;\n  } catch (err) {\n    console.log(err);\n    return [];\n  }\n};\nexport const addFirebaseItem = async item => {\n  try {\n    const todoRef = db.collection('todos');\n    await todoRef.add(item);\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const updateFirebaseItem = async (item, id) => {\n  try {\n    const todoRef = db.collection('todos').doc(id);\n    await todoRef.update(item);\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const clearFirebaseItem = async item => {\n  const todoRef = db.collection('todos').doc(item.id);\n  await todoRef.delete().then(function () {}).catch(function (err) {\n    console.log(err);\n  });\n};\nexport const uiConfig = {\n  signInFlow: 'popup',\n  signInSuccessUrl: '/',\n  signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID]\n};\nexport const storeUserInfo = async user => {\n  const {\n    uid\n  } = user;\n  const userDoc = await db.collection('users').doc(uid).get();\n\n  if (!userDoc.exists) {\n    await db.collection('users').doc(uid).set({\n      name: user.displayName\n    });\n    return {\n      name: user.displayName,\n      id: uid\n    };\n  } else {\n    return {\n      id: uid,\n      ...userDoc.data()\n    };\n  }\n};\nexport const updateUser = async (user, image) => {\n  try {\n    const userDoc = await firebase.firestore().collection('users').doc(user.id).get();\n\n    if (userDoc.exists) {\n      await firebase.firestore().collection('users').doc(user.id).update({ ...userDoc.data(),\n        image: image\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n};\nexport const uploadImage = async image => {\n  const ref = firebase.storage().ref().child(`/images/${image.name}`);\n  let downloadUrl = '';\n\n  try {\n    await ref.put(image);\n    downloadUrl = await ref.getDownloadURL();\n  } catch (err) {\n    console.log(err);\n  }\n\n  return downloadUrl;\n};","map":{"version":3,"sources":["C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/src/firebase/firebase.config.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","db","firestore","auth","getFirebaseItems","snapshot","collection","get","items","docs","map","doc","data","id","err","console","log","addFirebaseItem","item","todoRef","add","updateFirebaseItem","update","clearFirebaseItem","delete","then","catch","uiConfig","signInFlow","signInSuccessUrl","signInOptions","GoogleAuthProvider","PROVIDER_ID","storeUserInfo","user","uid","userDoc","exists","set","name","displayName","updateUser","image","uploadImage","ref","storage","child","downloadUrl","put","getDownloadURL"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth'; //v9\r\nimport 'firebase/compat/firestore';\r\nimport 'firebase/compat/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA5W4p6CXsiXz_B-MTOm648XlbcHanBdKw\",\r\n  authDomain: \"thienitss.firebaseapp.com\",\r\n  projectId: \"thienitss\",\r\n  storageBucket: \"thienitss.appspot.com\",\r\n  messagingSenderId: \"393590550782\",\r\n  appId: \"1:393590550782:web:41105fb580453effa735af\",\r\n  measurementId: \"G-F6TQFX0GHF\"\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// Export\r\n// export const googleAuthProvider = new GoogleAuthProvider();\r\n// export const facebookAuthProvider = new FacebookAuthProvider();\r\n\r\nconst db = firebase.firestore();\r\nexport const auth = firebase.auth();\r\nexport default firebase;\r\n\r\nexport const getFirebaseItems = async () => {\r\n  try {\r\n    const snapshot = await db.collection('todos').get();\r\n    const items = snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }));\r\n    return items;\r\n  } catch (err) {\r\n    console.log(err);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const addFirebaseItem = async (item) => {\r\n  try {\r\n    const todoRef = db.collection('todos');\r\n    await todoRef.add(item);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const updateFirebaseItem = async (item, id) => {\r\n  try {\r\n    const todoRef = db.collection('todos').doc(id);\r\n    await todoRef.update(item);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const clearFirebaseItem = async (item) => {\r\n  const todoRef = db.collection('todos').doc(item.id);\r\n  await todoRef\r\n    .delete()\r\n    .then(function () {})\r\n    .catch(function (err) {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const uiConfig = {\r\n  signInFlow: 'popup',\r\n  signInSuccessUrl: '/',\r\n  signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\r\n};\r\n\r\nexport const storeUserInfo = async (user) => {\r\n  const { uid } = user;\r\n  const userDoc = await db.collection('users').doc(uid).get();\r\n  if (!userDoc.exists) {\r\n    await db.collection('users').doc(uid).set({ name: user.displayName });\r\n    return {\r\n      name: user.displayName,\r\n      id: uid,\r\n    };\r\n  } else {\r\n    return {\r\n      id: uid,\r\n      ...userDoc.data(),\r\n    };\r\n  }\r\n};\r\n\r\nexport const updateUser = async (user, image) => {\r\n  try {\r\n    const userDoc = await firebase\r\n      .firestore()\r\n      .collection('users')\r\n      .doc(user.id)\r\n      .get();\r\n    if (userDoc.exists) {\r\n      await firebase\r\n        .firestore()\r\n        .collection('users')\r\n        .doc(user.id)\r\n        .update({ ...userDoc.data(), image: image });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const uploadImage = async (image) => {\r\n  const ref = firebase.storage().ref().child(`/images/${image.name}`);\r\n  let downloadUrl = '';\r\n  try {\r\n    await ref.put(image);\r\n    downloadUrl = await ref.getDownloadURL();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return downloadUrl;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}