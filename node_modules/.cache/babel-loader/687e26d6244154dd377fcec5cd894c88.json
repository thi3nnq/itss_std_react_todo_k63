{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from'firebase/compat/app';import'firebase/compat/auth';//v9\nimport'firebase/compat/firestore';import'firebase/compat/storage';var firebaseConfig={apiKey:\"AIzaSyA5W4p6CXsiXz_B-MTOm648XlbcHanBdKw\",authDomain:\"thienitss.firebaseapp.com\",projectId:\"thienitss\",storageBucket:\"thienitss.appspot.com\",messagingSenderId:\"393590550782\",appId:\"1:393590550782:web:41105fb580453effa735af\",measurementId:\"G-F6TQFX0GHF\"};// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);// Export\n// export const googleAuthProvider = new GoogleAuthProvider();\n// export const facebookAuthProvider = new FacebookAuthProvider();\nvar db=firebase.firestore();export var auth=firebase.auth();export default firebase;export var getFirebaseItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var snapshot,items;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return db.collection('todos').get();case 3:snapshot=_context.sent;items=snapshot.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});});return _context.abrupt(\"return\",items);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",[]);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getFirebaseItems(){return _ref.apply(this,arguments);};}();export var addFirebaseItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){var todoRef;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;todoRef=db.collection('todos');_context2.next=4;return todoRef.add(item);case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function addFirebaseItem(_x){return _ref2.apply(this,arguments);};}();export var updateFirebaseItem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item,id){var todoRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;todoRef=db.collection('todos').doc(id);_context3.next=4;return todoRef.update(item);case 4:_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function updateFirebaseItem(_x2,_x3){return _ref3.apply(this,arguments);};}();export var clearFirebaseItem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item){var todoRef;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:todoRef=db.collection('todos').doc(item.id);_context4.next=3;return todoRef.delete().then(function(){}).catch(function(err){console.log(err);});case 3:case\"end\":return _context4.stop();}}},_callee4);}));return function clearFirebaseItem(_x4){return _ref4.apply(this,arguments);};}();export var uiConfig={signInFlow:'popup',signInSuccessUrl:'/',signInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID]};export var storeUserInfo=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(user){var uid,userDoc;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:uid=user.uid;_context5.next=3;return db.collection('users').doc(uid).get();case 3:userDoc=_context5.sent;if(userDoc.exists){_context5.next=10;break;}_context5.next=7;return db.collection('users').doc(uid).set({name:user.displayName});case 7:return _context5.abrupt(\"return\",{name:user.displayName,id:uid});case 10:return _context5.abrupt(\"return\",_objectSpread({id:uid},userDoc.data()));case 11:case\"end\":return _context5.stop();}}},_callee5);}));return function storeUserInfo(_x5){return _ref5.apply(this,arguments);};}();export var updateUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(user,image){var userDoc;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return firebase.firestore().collection('users').doc(user.id).get();case 3:userDoc=_context6.sent;if(!userDoc.exists){_context6.next=7;break;}_context6.next=7;return firebase.firestore().collection('users').doc(user.id).update(_objectSpread(_objectSpread({},userDoc.data()),{},{image:image}));case 7:_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](0);console.log(_context6.t0);case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[0,9]]);}));return function updateUser(_x6,_x7){return _ref6.apply(this,arguments);};}();export var uploadImage=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(image){var ref,downloadUrl;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:ref=firebase.storage().ref().child(\"/images/\".concat(image.name));downloadUrl='';_context7.prev=2;_context7.next=5;return ref.put(image);case 5:_context7.next=7;return ref.getDownloadURL();case 7:downloadUrl=_context7.sent;_context7.next=13;break;case 10:_context7.prev=10;_context7.t0=_context7[\"catch\"](2);console.log(_context7.t0);case 13:return _context7.abrupt(\"return\",downloadUrl);case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[2,10]]);}));return function uploadImage(_x8){return _ref7.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/src/firebase/firebase.config.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","initializeApp","db","firestore","auth","getFirebaseItems","collection","get","snapshot","items","docs","map","doc","data","id","console","log","addFirebaseItem","item","todoRef","add","updateFirebaseItem","update","clearFirebaseItem","delete","then","catch","err","uiConfig","signInFlow","signInSuccessUrl","signInOptions","GoogleAuthProvider","PROVIDER_ID","storeUserInfo","user","uid","userDoc","exists","set","name","displayName","updateUser","image","uploadImage","ref","storage","child","downloadUrl","put","getDownloadURL"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth'; //v9\r\nimport 'firebase/compat/firestore';\r\nimport 'firebase/compat/storage';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA5W4p6CXsiXz_B-MTOm648XlbcHanBdKw\",\r\n  authDomain: \"thienitss.firebaseapp.com\",\r\n  projectId: \"thienitss\",\r\n  storageBucket: \"thienitss.appspot.com\",\r\n  messagingSenderId: \"393590550782\",\r\n  appId: \"1:393590550782:web:41105fb580453effa735af\",\r\n  measurementId: \"G-F6TQFX0GHF\"\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// Export\r\n// export const googleAuthProvider = new GoogleAuthProvider();\r\n// export const facebookAuthProvider = new FacebookAuthProvider();\r\n\r\nconst db = firebase.firestore();\r\nexport const auth = firebase.auth();\r\nexport default firebase;\r\n\r\nexport const getFirebaseItems = async () => {\r\n  try {\r\n    const snapshot = await db.collection('todos').get();\r\n    const items = snapshot.docs.map((doc) => ({ ...doc.data(), id: doc.id }));\r\n    return items;\r\n  } catch (err) {\r\n    console.log(err);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const addFirebaseItem = async (item) => {\r\n  try {\r\n    const todoRef = db.collection('todos');\r\n    await todoRef.add(item);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const updateFirebaseItem = async (item, id) => {\r\n  try {\r\n    const todoRef = db.collection('todos').doc(id);\r\n    await todoRef.update(item);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const clearFirebaseItem = async (item) => {\r\n  const todoRef = db.collection('todos').doc(item.id);\r\n  await todoRef\r\n    .delete()\r\n    .then(function () {})\r\n    .catch(function (err) {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const uiConfig = {\r\n  signInFlow: 'popup',\r\n  signInSuccessUrl: '/',\r\n  signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\r\n};\r\n\r\nexport const storeUserInfo = async (user) => {\r\n  const { uid } = user;\r\n  const userDoc = await db.collection('users').doc(uid).get();\r\n  if (!userDoc.exists) {\r\n    await db.collection('users').doc(uid).set({ name: user.displayName });\r\n    return {\r\n      name: user.displayName,\r\n      id: uid,\r\n    };\r\n  } else {\r\n    return {\r\n      id: uid,\r\n      ...userDoc.data(),\r\n    };\r\n  }\r\n};\r\n\r\nexport const updateUser = async (user, image) => {\r\n  try {\r\n    const userDoc = await firebase\r\n      .firestore()\r\n      .collection('users')\r\n      .doc(user.id)\r\n      .get();\r\n    if (userDoc.exists) {\r\n      await firebase\r\n        .firestore()\r\n        .collection('users')\r\n        .doc(user.id)\r\n        .update({ ...userDoc.data(), image: image });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const uploadImage = async (image) => {\r\n  const ref = firebase.storage().ref().child(`/images/${image.name}`);\r\n  let downloadUrl = '';\r\n  try {\r\n    await ref.put(image);\r\n    downloadUrl = await ref.getDownloadURL();\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  return downloadUrl;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}