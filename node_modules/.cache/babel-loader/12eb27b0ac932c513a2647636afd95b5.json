{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';/* スタイルシート */import'./styles/main.css';/* コンポーネント */import Todo from'./components/Todo';import Login from'./components/Login';import{auth,storeUserInfo,updateUser}from'./firebase/firebase.config';import Upload from'./components/Upload';function App(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];useEffect(function(){auth.onAuthStateChanged(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user){var newUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(false);newUser=null;if(!user){_context.next=6;break;}_context.next=5;return storeUserInfo(user);case 5:newUser=_context.sent;case 6:setUser(newUser);case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);var logout=function logout(){auth.signOut();};var handleImageChanged=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(downlodUrl){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateUser(user,downlodUrl);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function handleImageChanged(_x2){return _ref2.apply(this,arguments);};}();var HeaderContent=function HeaderContent(){if(user){return/*#__PURE__*/_jsxs(\"div\",{class:\"navbar-end\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"navbar-item\",children:[/*#__PURE__*/_jsx(Upload,{userImage:user.image,onSletctedImage:handleImageChanged}),user.name]}),/*#__PURE__*/_jsx(\"div\",{class:\"navbar-item\",children:/*#__PURE__*/_jsxs(\"button\",{class:\"button is-danger is-light is-small\",onClick:logout,children:[' ',\"Logout\"]})})]});}else{return/*#__PURE__*/_jsx(Login,{});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container is-fluid\",children:[/*#__PURE__*/_jsx(\"header\",{class:\"navbar\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"LOADING.....\"}):/*#__PURE__*/_jsx(HeaderContent,{})}),/*#__PURE__*/_jsx(\"div\",{children:user&&/*#__PURE__*/_jsx(Todo,{})})]});}export default App;","map":{"version":3,"sources":["C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/src/App.js"],"names":["React","useEffect","useState","Todo","Login","auth","storeUserInfo","updateUser","Upload","App","loading","setLoading","user","setUser","onAuthStateChanged","newUser","logout","signOut","handleImageChanged","downlodUrl","HeaderContent","image","name"],"mappings":"+lBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAEA,aACA,MAAO,mBAAP,CAEA,aACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,OAASC,IAAT,CAAeC,aAAf,CAA8BC,UAA9B,KAAgD,4BAAhD,CAEA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CAEA,QAASC,CAAAA,GAAT,EAAe,eACiBP,QAAQ,CAAC,IAAD,CADzB,wCACNQ,OADM,eACGC,UADH,8BAEWT,QAAQ,CAAC,EAAD,CAFnB,yCAENU,IAFM,eAEAC,OAFA,eAIbZ,SAAS,CAAC,UAAM,CACdI,IAAI,CAACS,kBAAL,0FAAwB,iBAAOF,IAAP,8HACtBD,UAAU,CAAC,KAAD,CAAV,CACII,OAFkB,CAER,IAFQ,KAGlBH,IAHkB,+CAIJN,CAAAA,aAAa,CAACM,IAAD,CAJT,QAIpBG,OAJoB,sBAMtBF,OAAO,CAACE,OAAD,CAAP,CANsB,sDAAxB,gEAQD,CATQ,CASN,EATM,CAAT,CAWA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBX,IAAI,CAACY,OAAL,GACD,CAFD,CAIA,GAAMC,CAAAA,kBAAkB,2FAAG,kBAAOC,UAAP,6IACnBZ,CAAAA,UAAU,CAACK,IAAD,CAAOO,UAAP,CADS,yDAAH,kBAAlBD,CAAAA,kBAAkB,8CAAxB,CAIA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,GAAIR,IAAJ,CAAU,CACR,mBACE,aAAK,KAAK,CAAC,YAAX,wBACE,aAAK,KAAK,CAAC,aAAX,wBACE,KAAC,MAAD,EACE,SAAS,CAAEA,IAAI,CAACS,KADlB,CAEE,eAAe,CAAEH,kBAFnB,EADF,CAKGN,IAAI,CAACU,IALR,GADF,cAQE,YAAK,KAAK,CAAC,aAAX,uBACE,gBAAQ,KAAK,CAAC,oCAAd,CAAmD,OAAO,CAAEN,MAA5D,WACG,GADH,YADF,EARF,GADF,CAiBD,CAlBD,IAkBO,CACL,mBAAO,KAAC,KAAD,IAAP,CACD,CACF,CAtBD,CAwBA,mBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,eAAQ,KAAK,CAAC,QAAd,UACGN,OAAO,cAAG,mCAAH,cAAyB,KAAC,aAAD,IADnC,EADF,cAIE,qBAAME,IAAI,eAAI,KAAC,IAAD,IAAd,EAJF,GADF,CAQD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\n/* スタイルシート */\r\nimport './styles/main.css';\r\n\r\n/* コンポーネント */\r\nimport Todo from './components/Todo';\r\nimport Login from './components/Login';\r\nimport { auth, storeUserInfo, updateUser } from './firebase/firebase.config';\r\n\r\nimport Upload from './components/Upload';\r\n\r\nfunction App() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [user, setUser] = useState([]);\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(async (user) => {\r\n      setLoading(false);\r\n      let newUser = null;\r\n      if (user) {\r\n        newUser = await storeUserInfo(user);\r\n      }\r\n      setUser(newUser);\r\n    });\r\n  }, []);\r\n\r\n  const logout = () => {\r\n    auth.signOut();\r\n  };\r\n\r\n  const handleImageChanged = async (downlodUrl) => {\r\n    await updateUser(user, downlodUrl);\r\n  };\r\n\r\n  const HeaderContent = () => {\r\n    if (user) {\r\n      return (\r\n        <div class='navbar-end'>\r\n          <div class='navbar-item'>\r\n            <Upload\r\n              userImage={user.image}\r\n              onSletctedImage={handleImageChanged}\r\n            />\r\n            {user.name}\r\n          </div>\r\n          <div class='navbar-item'>\r\n            <button class='button is-danger is-light is-small' onClick={logout}>\r\n              {' '}\r\n              Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    } else {\r\n      return <Login />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='container is-fluid'>\r\n      <header class='navbar'>\r\n        {loading ? <p>LOADING.....</p> : <HeaderContent />}\r\n      </header>\r\n      <div>{user && <Todo />}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}