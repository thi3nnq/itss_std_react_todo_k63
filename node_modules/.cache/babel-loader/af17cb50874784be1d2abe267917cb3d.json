{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\n/* ライブラリ */\n\nimport { addFirebaseItem, updateFirebaseItem, getFirebaseItems, clearFirebaseItem } from '../firebase/firebase.config';\n\nfunction useFbStorage() {\n  _s();\n\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    getItems();\n  }, [items]);\n\n  const getItems = async () => {\n    const _items = await getFirebaseItems();\n\n    setItems(_items);\n  };\n\n  const addItem = async item => {\n    const newItem = {\n      text: item.text,\n      done: item.done\n    };\n    await addFirebaseItem(newItem);\n    setItems([...items, newItem]);\n  };\n\n  const updateItem = async checked => {\n    const changes = {\n      done: !checked.done\n    };\n    await updateFirebaseItem(changes, checked.id);\n    const newItems = items.map(item => {\n      if (item.id === checked.id) {\n        item = { ...item,\n          changes\n        };\n      }\n\n      return item;\n    });\n    setItems(newItems);\n  };\n\n  const clearItems = () => {\n    items.map(item => {\n      clearFirebaseItem(item);\n    });\n    setItems([]);\n  };\n\n  return [items, addItem, updateItem, clearItems];\n}\n\n_s(useFbStorage, \"E85yb7BhBnl3/OpymRdjFiQJ97s=\");\n\nexport default useFbStorage;","map":{"version":3,"sources":["C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/src/hooks/fbStorage.js"],"names":["useState","useEffect","addFirebaseItem","updateFirebaseItem","getFirebaseItems","clearFirebaseItem","useFbStorage","items","setItems","getItems","_items","addItem","item","newItem","text","done","updateItem","checked","changes","id","newItems","map","clearItems"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA;;AACA,SACEC,eADF,EAEEC,kBAFF,EAGEC,gBAHF,EAIEC,iBAJF,QAKO,6BALP;;AAOA,SAASC,YAAT,GAAwB;AAAA;;AACtB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,QAAQ;AACT,GAFQ,EAEN,CAACF,KAAD,CAFM,CAAT;;AAIA,QAAME,QAAQ,GAAG,YAAY;AAC3B,UAAMC,MAAM,GAAG,MAAMN,gBAAgB,EAArC;;AACAI,IAAAA,QAAQ,CAACE,MAAD,CAAR;AACD,GAHD;;AAKA,QAAMC,OAAO,GAAG,MAAOC,IAAP,IAAgB;AAC9B,UAAMC,OAAO,GAAG;AAAEC,MAAAA,IAAI,EAAEF,IAAI,CAACE,IAAb;AAAmBC,MAAAA,IAAI,EAAEH,IAAI,CAACG;AAA9B,KAAhB;AACA,UAAMb,eAAe,CAACW,OAAD,CAArB;AACAL,IAAAA,QAAQ,CAAC,CAAC,GAAGD,KAAJ,EAAWM,OAAX,CAAD,CAAR;AACD,GAJD;;AAMA,QAAMG,UAAU,GAAG,MAAOC,OAAP,IAAmB;AACpC,UAAMC,OAAO,GAAG;AAAEH,MAAAA,IAAI,EAAE,CAACE,OAAO,CAACF;AAAjB,KAAhB;AACA,UAAMZ,kBAAkB,CAACe,OAAD,EAAUD,OAAO,CAACE,EAAlB,CAAxB;AACA,UAAMC,QAAQ,GAAGb,KAAK,CAACc,GAAN,CAAWT,IAAD,IAAU;AACnC,UAAIA,IAAI,CAACO,EAAL,KAAYF,OAAO,CAACE,EAAxB,EAA4B;AAC1BP,QAAAA,IAAI,GAAG,EAAE,GAAGA,IAAL;AAAWM,UAAAA;AAAX,SAAP;AACD;;AACD,aAAON,IAAP;AACD,KALgB,CAAjB;AAMAJ,IAAAA,QAAQ,CAACY,QAAD,CAAR;AACD,GAVD;;AAYA,QAAME,UAAU,GAAG,MAAM;AACvBf,IAAAA,KAAK,CAACc,GAAN,CAAWT,IAAD,IAAU;AAClBP,MAAAA,iBAAiB,CAACO,IAAD,CAAjB;AACD,KAFD;AAGAJ,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,GALD;;AAOA,SAAO,CAACD,KAAD,EAAQI,OAAR,EAAiBK,UAAjB,EAA6BM,UAA7B,CAAP;AACD;;GAtCQhB,Y;;AAwCT,eAAeA,YAAf","sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\n/* ライブラリ */\r\nimport {\r\n  addFirebaseItem,\r\n  updateFirebaseItem,\r\n  getFirebaseItems,\r\n  clearFirebaseItem,\r\n} from '../firebase/firebase.config';\r\n\r\nfunction useFbStorage() {\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getItems();\r\n  }, [items]);\r\n\r\n  const getItems = async () => {\r\n    const _items = await getFirebaseItems();\r\n    setItems(_items);\r\n  };\r\n\r\n  const addItem = async (item) => {\r\n    const newItem = { text: item.text, done: item.done };\r\n    await addFirebaseItem(newItem);\r\n    setItems([...items, newItem]);\r\n  };\r\n\r\n  const updateItem = async (checked) => {\r\n    const changes = { done: !checked.done };\r\n    await updateFirebaseItem(changes, checked.id);\r\n    const newItems = items.map((item) => {\r\n      if (item.id === checked.id) {\r\n        item = { ...item, changes };\r\n      }\r\n      return item;\r\n    });\r\n    setItems(newItems);\r\n  };\r\n\r\n  const clearItems = () => {\r\n    items.map((item) => {\r\n      clearFirebaseItem(item);\r\n    });\r\n    setItems([]);\r\n  };\r\n\r\n  return [items, addItem, updateItem, clearItems];\r\n}\r\n\r\nexport default useFbStorage;\r\n"]},"metadata":{},"sourceType":"module"}