{"ast":null,"code":"import _objectSpread from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';/* ライブラリ */import{addFirebaseItem,updateFirebaseItem,getFirebaseItems,clearFirebaseItem}from'../firebase/firebase.config';function useFbStorage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];useEffect(function(){getItems();},[items]);var getItems=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _items;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getFirebaseItems();case 2:_items=_context.sent;setItems(_items);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getItems(){return _ref.apply(this,arguments);};}();var addItem=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){var newItem;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newItem={text:item.text,done:item.done};_context2.next=3;return addFirebaseItem(newItem);case 3:setItems([].concat(_toConsumableArray(items),[newItem]));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function addItem(_x){return _ref2.apply(this,arguments);};}();var updateItem=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(checked){var changes,newItems;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:changes={done:!checked.done};_context3.next=3;return updateFirebaseItem(changes,checked.id);case 3:newItems=items.map(function(item){if(item.id===checked.id){item=_objectSpread(_objectSpread({},item),{},{changes:changes});}return item;});setItems(newItems);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function updateItem(_x2){return _ref3.apply(this,arguments);};}();var clearItems=function clearItems(){items.map(function(item){clearFirebaseItem(item);});setItems([]);};return[items,addItem,updateItem,clearItems];}export default useFbStorage;","map":{"version":3,"sources":["C:/Users/virus/OneDrive/Desktop/itss_std_react_todo_k63/src/hooks/fbStorage.js"],"names":["useState","useEffect","addFirebaseItem","updateFirebaseItem","getFirebaseItems","clearFirebaseItem","useFbStorage","items","setItems","getItems","_items","addItem","item","newItem","text","done","updateItem","checked","changes","id","newItems","map","clearItems"],"mappings":"02BAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAEA,WACA,OACEC,eADF,CAEEC,kBAFF,CAGEC,gBAHF,CAIEC,iBAJF,KAKO,6BALP,CAOA,QAASC,CAAAA,YAAT,EAAwB,eACIN,QAAQ,CAAC,EAAD,CADZ,wCACfO,KADe,eACRC,QADQ,eAGtBP,SAAS,CAAC,UAAM,CACdQ,QAAQ,GACT,CAFQ,CAEN,CAACF,KAAD,CAFM,CAAT,CAIA,GAAME,CAAAA,QAAQ,0FAAG,oKACML,CAAAA,gBAAgB,EADtB,QACTM,MADS,eAEfF,QAAQ,CAACE,MAAD,CAAR,CAFe,sDAAH,kBAARD,CAAAA,QAAQ,0CAAd,CAKA,GAAME,CAAAA,OAAO,2FAAG,kBAAOC,IAAP,kIACRC,OADQ,CACE,CAAEC,IAAI,CAAEF,IAAI,CAACE,IAAb,CAAmBC,IAAI,CAAEH,IAAI,CAACG,IAA9B,CADF,wBAERb,CAAAA,eAAe,CAACW,OAAD,CAFP,QAGdL,QAAQ,8BAAKD,KAAL,GAAYM,OAAZ,GAAR,CAHc,wDAAH,kBAAPF,CAAAA,OAAO,6CAAb,CAMA,GAAMK,CAAAA,UAAU,2FAAG,kBAAOC,OAAP,2IACXC,OADW,CACD,CAAEH,IAAI,CAAE,CAACE,OAAO,CAACF,IAAjB,CADC,wBAEXZ,CAAAA,kBAAkB,CAACe,OAAD,CAAUD,OAAO,CAACE,EAAlB,CAFP,QAGXC,QAHW,CAGAb,KAAK,CAACc,GAAN,CAAU,SAACT,IAAD,CAAU,CACnC,GAAIA,IAAI,CAACO,EAAL,GAAYF,OAAO,CAACE,EAAxB,CAA4B,CAC1BP,IAAI,gCAAQA,IAAR,MAAcM,OAAO,CAAPA,OAAd,EAAJ,CACD,CACD,MAAON,CAAAA,IAAP,CACD,CALgB,CAHA,CASjBJ,QAAQ,CAACY,QAAD,CAAR,CATiB,wDAAH,kBAAVJ,CAAAA,UAAU,8CAAhB,CAYA,GAAMM,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBf,KAAK,CAACc,GAAN,CAAU,SAACT,IAAD,CAAU,CAClBP,iBAAiB,CAACO,IAAD,CAAjB,CACD,CAFD,EAGAJ,QAAQ,CAAC,EAAD,CAAR,CACD,CALD,CAOA,MAAO,CAACD,KAAD,CAAQI,OAAR,CAAiBK,UAAjB,CAA6BM,UAA7B,CAAP,CACD,CAED,cAAehB,CAAAA,YAAf","sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\n/* ライブラリ */\r\nimport {\r\n  addFirebaseItem,\r\n  updateFirebaseItem,\r\n  getFirebaseItems,\r\n  clearFirebaseItem,\r\n} from '../firebase/firebase.config';\r\n\r\nfunction useFbStorage() {\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getItems();\r\n  }, [items]);\r\n\r\n  const getItems = async () => {\r\n    const _items = await getFirebaseItems();\r\n    setItems(_items);\r\n  };\r\n\r\n  const addItem = async (item) => {\r\n    const newItem = { text: item.text, done: item.done };\r\n    await addFirebaseItem(newItem);\r\n    setItems([...items, newItem]);\r\n  };\r\n\r\n  const updateItem = async (checked) => {\r\n    const changes = { done: !checked.done };\r\n    await updateFirebaseItem(changes, checked.id);\r\n    const newItems = items.map((item) => {\r\n      if (item.id === checked.id) {\r\n        item = { ...item, changes };\r\n      }\r\n      return item;\r\n    });\r\n    setItems(newItems);\r\n  };\r\n\r\n  const clearItems = () => {\r\n    items.map((item) => {\r\n      clearFirebaseItem(item);\r\n    });\r\n    setItems([]);\r\n  };\r\n\r\n  return [items, addItem, updateItem, clearItems];\r\n}\r\n\r\nexport default useFbStorage;\r\n"]},"metadata":{},"sourceType":"module"}